(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{1791:(e,a,s)=>{Promise.resolve().then(s.bind(s,1660))},1660:(e,a,s)=>{"use strict";s.d(a,{default:()=>c});var t=s(5155),l=s(2115),r=s(7396),n=s(6046);let c=()=>{let[e,a]=(0,l.useState)(""),[s,c]=(0,l.useState)(""),[i,d]=(0,l.useState)(""),[o,m]=(0,l.useState)(""),[x,u]=(0,l.useState)(!1),[h,p]=(0,l.useState)("dark"),[j,b]=(0,l.useState)(""),[f,N]=(0,l.useState)(!1),[g,w]=(0,l.useState)(!1),[v,y]=(0,l.useState)(!1),[k,S]=(0,l.useState)(!1),[C,P]=(0,l.useState)(!1),_=(0,n.useRouter)();(0,l.useEffect)(()=>{document.documentElement.setAttribute("data-theme",h),localStorage.getItem("access_token")&&_.push("/dashboard")},[_,h]);let E=async a=>{if(a.preventDefault(),w(!1),y(!1),S(!1),P(!1),!e){w(!0);return}if(!s){y(!0);return}if(!i){S(!0);return}if(i!==o){P(!0);return}N(!0);try{let a=await fetch("https://pos-backend-nest-5935331f9eea.herokuapp.com/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,email:s,password:i})});if(a.ok){let e=await a.json();localStorage.setItem("access_token",e.access_token),_.push("/dashboard")}else{let e=await a.json();b(e.message||"Login failed"),u(!0)}}catch(e){b("An error occurred. Please try again."),u(!0)}finally{N(!1)}};return(0,t.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen ".concat("dark"===h?"bg-gray-900":"bg-gray-100"," px-5"),children:(0,t.jsx)("div",{className:"w-full max-w-4xl ".concat("dark"===h?"bg-gray-800 text-white":"bg-white text-black"," rounded-lg overflow-hidden flex flex-col md:flex-row"),children:(0,t.jsxs)("div",{className:"w-full md:w-1/2 p-6",children:[(0,t.jsx)("h5",{className:"text-center mb-2",children:"Selamat datang"}),(0,t.jsxs)("form",{className:"space-y-4",onSubmit:E,children:[(0,t.jsxs)("div",{className:"form-control",children:[(0,t.jsx)("label",{className:"label",children:(0,t.jsx)("span",{className:"label-text",children:"Username"})}),(0,t.jsx)("input",{type:"text",placeholder:"Username",className:"input input-bordered input-sm w-full max-w ".concat(g?"input-error":""),value:e,onChange:e=>a(e.target.value)}),g&&(0,t.jsx)("span",{className:"text-error text-xs mt-2",children:"Username is required"})]}),(0,t.jsxs)("div",{className:"form-control",children:[(0,t.jsx)("label",{className:"label",children:(0,t.jsx)("span",{className:"label-text",children:"Email"})}),(0,t.jsx)("input",{type:"email",placeholder:"Email",className:"input input-bordered input-sm w-full max-w ".concat(v?"input-error":""),value:s,onChange:e=>c(e.target.value)}),v&&(0,t.jsx)("span",{className:"text-error text-xs mt-2",children:"Email is required"})]}),(0,t.jsxs)("div",{className:"form-control",children:[(0,t.jsx)("label",{className:"label",children:(0,t.jsx)("span",{className:"label-text",children:"Password"})}),(0,t.jsx)("input",{type:"password",placeholder:"Password",className:"input input-bordered input-sm w-full max-w ".concat(k?"input-error":""),value:i,onChange:e=>d(e.target.value)}),k&&(0,t.jsx)("span",{className:"text-error text-xs mt-2",children:"Password is required"})]}),(0,t.jsxs)("div",{className:"form-control",children:[(0,t.jsx)("label",{className:"label",children:(0,t.jsx)("span",{className:"label-text",children:"Confirm Password"})}),(0,t.jsx)("input",{type:"password",placeholder:"Confirm Password",className:"input input-bordered input-sm w-full max-w ".concat(C?"input-error":""),value:o,onChange:e=>m(e.target.value)}),C&&(0,t.jsx)("span",{className:"text-error text-xs mt-2",children:"Passwords do not match"})]}),(0,t.jsx)("div",{className:"form-control mt-6",children:(0,t.jsx)("button",{type:"submit",className:"btn btn-sm bg-blue-600 w-full mt-4 text-white ".concat(f?"loading-xs":""),disabled:f,children:f?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"loading loading-spinner text-primary"}),"Loading..."]}):"Register"})})]}),(0,t.jsxs)("div",{className:"mt-4 text-center",children:[(0,t.jsx)("span",{children:"Already have an account? "}),(0,t.jsx)(r.default,{href:"/login",legacyBehavior:!0,children:(0,t.jsx)("a",{className:"text-blue-500",children:"Login"})})]}),x&&(0,t.jsx)("div",{className:"modal modal-open",children:(0,t.jsxs)("div",{className:"modal-box flex flex-col items-center",children:[(0,t.jsxs)("div",{className:"xmark-circle",children:[(0,t.jsx)("div",{className:"background"}),(0,t.jsx)("div",{className:"xmark draw"})]}),(0,t.jsx)("h3",{className:"font-bold text-lg mt-4",children:"Login Gagal"}),(0,t.jsx)("p",{className:"py-4",children:j}),(0,t.jsx)("div",{className:"modal-action",children:(0,t.jsx)("button",{className:"btn",onClick:()=>u(!1),children:"OK"})})]})})]})})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[463,441,517,358],()=>a(1791)),_N_E=e.O()}]);